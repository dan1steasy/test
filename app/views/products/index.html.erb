<% @page_title = 'Products' -%>

<!--[div:contentleft]-->
<div id="contentleft">
  <h2>Products</h2>
  <p><%= pluralize @total_products, 'product' %> in the database.</p>
  <p>Find &amp; view products using any of the methods below.</p>

  <h2>Find product</h2>
  <p>Product name starts with:</p>
  <%= starting_character_table %>

  <% if(@total_products < 500) and (@total_products > 0) %>
  <br />
  <h3>Select a product:</h3>
  <p>Choose a product using the drop-down below.</p>
  <%= start_form_tag :action => 'show' %>
    <%= collection_select :product, :id, @products, :id, :name_and_price %>
    <%= submit_tag "Show product" %>
  <%= end_form_tag %>
  <% end -%>
  <br />

  <h3>Searches</h3>
  <p>Use the search forms below to find products.</p>
  <table>
    <%= start_form_tag :action => 'search' %>
    <tr>
      <th><label for="product_name">Name:</label></th>
      <td><%= text_field_with_auto_complete :product, :name %></td>
      <td><%= submit_tag 'Search' %></td>
    </tr>
    <%= end_form_tag %>
    <%= start_form_tag :action => 'search' %>
    <tr>
      <th><label for="product_code">Product code:</label></th>
      <td><%= text_field_with_auto_complete :product, :code %></td>
      <td><%= submit_tag 'Search' %></td>
    </tr>
    <%= end_form_tag %>
    <%= start_form_tag :action => 'search' %>
    <tr>
      <th><label for="product_description">Description:</label></th>
      <td><%= text_field_with_auto_complete :product, :description %></td>
      <td><%= submit_tag 'Search' %></td>
    </tr>
    <%= end_form_tag %>
  </table>
</div>
<!--[eodiv:contentleft]-->

<% if @categories.size > 0 %>
<!--[div:contentright]-->
<div id="contentright">
  <h2>Add new product</h2>
  <p>Use the form below to add a new product.</p>
  <%= start_form_tag :action => 'create' %>
  <table>
    <tr>
      <td><label for="product_category_id">Category</label></td>
      <td><%= collection_select :product, :category_id, @categories, :id, :name %></td>
    </tr>
    <%= render :partial => 'form' %>
    <tr>
      <td><%= submit_tag 'Add product' %></td>
    </tr>
  </table>
  <%= end_form_tag %>
</div>
<!--[eodiv:contentright]-->
<% end %>
